<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ten Thousand Affirmations — Happy Birthday</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1: #0f172a;
    --bg2: #0b1220;
    --accent: #ff6b9a;
    --muted: rgba(255,255,255,0.75);
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  body{
    background: radial-gradient(1200px 600px at 10% 10%, rgba(255,107,154,0.12), transparent 8%),
                radial-gradient(1000px 500px at 90% 90%, rgba(79,70,229,0.06), transparent 10%),
                linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:40px;
    box-sizing:border-box;
  }

  .card{
    width:min(980px,96vw);
    background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
    border-radius:20px;
    padding:40px;
    box-shadow: 0 10px 30px rgba(2,6,23,0.6);
    position:relative;
    overflow:hidden;
    border: 1px solid rgba(255,255,255,0.04);
  }

  header{
    display:flex;
    gap:16px;
    align-items:center;
    margin-bottom:18px;
  }
  .logo{
    width:56px;height:56px;border-radius:12px;
    background:linear-gradient(135deg,#ff6b9a,#7c3aed);
    display:flex;align-items:center;justify-content:center;font-weight:800;
    font-size:20px;color:white;box-shadow:0 6px 18px rgba(124,58,237,0.18);
  }
  h1{font-size:20px;margin:0;font-weight:700;letter-spacing:-0.02em}
  p.lead{margin:0;color:var(--muted);font-size:13px}

  .affirmation{
    margin-top:28px;
    font-size:30px;
    line-height:1.2;
    font-weight:600;
    text-align:center;
    padding:28px 36px;
    border-radius:14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border: 1px solid rgba(255,255,255,0.03);
    box-shadow: inset 0 -6px 24px rgba(2,6,23,0.25);
    transform-origin:center;
    animation: pop 700ms cubic-bezier(.2,.9,.3,1);
  }

  @keyframes pop {
    0% { transform: translateY(18px) scale(.98); opacity:0 }
    60% { transform: translateY(-6px) scale(1.02); opacity:1 }
    100% { transform: translateY(0) scale(1) }
  }

  .meta{
    margin-top:18px;
    display:flex;
    gap:10px;
    justify-content:center;
    align-items:center;
  }
  button{
    background:linear-gradient(90deg,var(--accent),#7c3aed);
    border:none;color:white;padding:10px 14px;border-radius:10px;font-weight:600;
    cursor:pointer;box-shadow:0 6px 18px rgba(124,58,237,0.12);
  }
  .secondary{
    background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted);
    padding:8px 12px;font-weight:600;border-radius:10px;cursor:pointer;
  }

  .note{
    margin-top:16px;text-align:center;color:var(--muted);font-size:13px;
  }

  /* confetti canvas full */
  #confetti { position:absolute; left:0; top:0; width:100%; height:100%; pointer-events:none; z-index:5; }

  footer{
    margin-top:18px;text-align:center;color:rgba(255,255,255,0.5);font-size:12px;
  }

  .small{
    font-size:12px;color:var(--muted);
  }

  @media (max-width:560px){
    .affirmation{font-size:20px;padding:20px}
    header h1{font-size:16px}
  }
</style>
</head>
<body>
  <div class="card" role="main" aria-live="polite">
    <canvas id="confetti"></canvas>

    <header>
      <div class="logo">❤</div>
      <div>
        <h1>Happy Birthday — A Word For Every Refresh</h1>
        <p class="lead">Each time you refresh this page, a new affirmation appears. Keep refreshing until you find the one that makes her smile the widest.</p>
      </div>
    </header>

    <div id="affirmation" class="affirmation">Loading affirmation…</div>

    <div class="meta">
      <button id="copyBtn">Copy</button>
      <button id="shareBtn" class="secondary">Share</button>
      <button id="nextBtn" class="secondary" title="Show next without refresh">Next (no refresh)</button>
    </div>

    <div class="note">
      Tip: Put a file named <code>/affirmations.txt</code> (one affirmation per line) on the same host to use your own 10,000+ affirmations.
    </div>

    <footer>
      <div class="small">Made with ❤️ — Customize the list and layout as you like.</div>
    </footer>
  </div>

<script>
/
 Behavior:
 - Try fetch '/affirmations.txt' (newline separated). If present, use it.
 - Otherwise use the embedded fallback list below.
 - Use localStorage key "affirm_idx_v1" to deterministically cycle through items:
    - index = (storedIndex % length); show that item; then increment and store (so next refresh shows next)
 - The "Next" button will advance without refresh (increment index and re-render).
/

// ---------- fallback list (30 samples). Replace or add your own here if you want inline.
const FALLBACK_AFFIRMATIONS = [
  "You are loved more than you know, today and always.",
  "Your laugh is my favorite sound in the world.",
  "You are braver than you believe and stronger than you seem.",
  "Every day with you is my new favorite day.",
  "You make the ordinary feel like magic.",
  "Your kindness changes people quietly but profoundly.",
  "I admire the way you see the world and make it better.",
  "You are beautiful, brilliant, and worthy of every good thing.",
  "Your presence is my peace and my greatest gift.",
  "You inspire me to be the best version of myself.",
  "Being loved by you makes everything brighter.",
  "I treasure your heart and the way you love so freely.",
  "Your courage when things get tough leaves me in awe.",
  "You deserve every single dream you have.",
  "Thank you for being you — perfectly, wonderfully you.",
  "Your smile can light up whole rooms and days.",
  "I love how you make even the small moments memorable.",
  "You are my favorite person, today and every day.",
  "You are creative, capable, and deserving of joy.",
  "You do so much good — seen and unseen.",
  "Your patience and warmth are a rare and beautiful thing.",
  "I fall for you all over again, every single day.",
  "You are enough, exactly as you are.",
  "Your strength is gentle and real — it moves me.",
  "You brighten lives just by being in them.",
  "I trust you, and I believe in your dreams.",
  "There’s no one else I’d rather share life’s adventures with.",
  "You are the calm to my chaos and the spark to my joy.",
  "Your love is a home I never want to leave.",
  "You make the world a softer, sweeter place."
];

// ---------- utilities & core logic ----------
const AFFIRMATION_ELEMENT = document.getElementById('affirmation');
const COPY_BTN = document.getElementById('copyBtn');
const SHARE_BTN = document.getElementById('shareBtn');
const NEXT_BTN = document.getElementById('nextBtn');

const STORAGE_KEY = 'affirm_idx_v1';

// fetch external file; returns array or null
async function loadExternalList(){
  try{
    const resp = await fetch('/affirmations.txt', {cache: "no-store"});
    if(!resp.ok) throw new Error('no file');
    const text = await resp.text();
    // split lines, remove empties, trim
    const lines = text.split(/\r?\n/).map(l => l.trim()).filter(Boolean);
    return lines.length ? lines : null;
  }catch(e){
    return null;
  }
}

function getStoredIndex(){
  const raw = localStorage.getItem(STORAGE_KEY);
  const n = parseInt(raw,10);
  return Number.isFinite(n) ? n : 0;
}
function setStoredIndex(n){ localStorage.setItem(STORAGE_KEY, String(n)); }

function pickAndShow(list){
  if(!list || !list.length) return;
  let idx = getStoredIndex();
  idx = idx % list.length;
  const item = list[idx];
  AFFIRMATION_ELEMENT.textContent = item;
  // small accessibility announcement
  AFFIRMATION_ELEMENT.setAttribute('aria-atomic','true');
  // increment for next time
  setStoredIndex(idx + 1);
  // confetti
  fireConfetti();
}

async function init(){
  // try external then fallback
  const external = await loadExternalList();
  const list = external || FALLBACK_AFFIRMATIONS;
  window._affirm_list = list; // expose for console
  pickAndShow(list);
}

// Next/advance without refresh
function showNext(){
  const list = window._affirm_list || FALLBACK_AFFIRMATIONS;
  // advance index immediately then show
  let idx = getStoredIndex();
  idx = idx % list.length;
  // show current (since stored index currently points to next to display on refresh),
  // but to emulate "next" button let's show the next item (increment first)
  const nextIdx = (idx + 1) % list.length;
  setStoredIndex(nextIdx + 1); // store one beyond so refresh continues after this
  AFFIRMATION_ELEMENT.textContent = list[nextIdx];
  fireConfetti();
}

// copy button
COPY_BTN.addEventListener('click', async ()=>{
  const txt = AFFIRMATION_ELEMENT.textContent || '';
  try{
    await navigator.clipboard.writeText(txt);
    COPY_BTN.textContent = 'Copied!';
    setTimeout(()=>COPY_BTN.textContent = 'Copy',1200);
  }catch(e){
    COPY_BTN.textContent = 'Copy (failed)';
    setTimeout(()=>COPY_BTN.textContent = 'Copy',1600);
  }
});

// share if available
SHARE_BTN.addEventListener('click', async ()=>{
  const txt = AFFIRMATION_ELEMENT.textContent || '';
  if(navigator.share){
    try{
      await navigator.share({title:'Birthday Affirmation', text: txt, url: location.href});
    }catch(e){}
  } else {
    // fallback: copy to clipboard and alert
    try{
      await navigator.clipboard.writeText(txt + '\n\n' + location.href);
      alert('Affirmation copied to clipboard. Paste into your message app to share.');
    }catch(e){
      alert('Sharing is not supported on this browser. Copy the text manually.');
    }
  }
});

NEXT_BTN.addEventListener('click', showNext);

// ---------- small confetti implementation ----------
function fireConfetti(){
  const canvas = document.getElementById('confetti');
  if(!canvas) return;
  const ctx = canvas.getContext('2d');
  const DPR = window.devicePixelRatio || 1;
  function resize(){
    canvas.width = canvas.clientWidth * DPR;
    canvas.height = canvas.clientHeight * DPR;
    ctx.scale(DPR, DPR);
  }
  resize();
  window.addEventListener('resize', resize);

  const pieces = [];
  const colors = ['#ff6b9a','#ffd166','#8ecae6','#7c3aed','#06d6a0'];
  for(let i=0;i<80;i++){
    pieces.push({
      x: Math.random()*canvas.clientWidth,
      y: -Math.random()*200,
      w: 6 + Math.random()*8,
      h: 9 + Math.random()*12,
      vx: (Math.random()-0.5)*3,
      vy: 2 + Math.random()*4,
      r: (Math.random()*360),
      vr: (Math.random()-0.5)*8,
      color: colors[Math.floor(Math.random()*colors.length)],
      tilt: Math.random()*Math.PI
    });
  }

  let t=0;
  function frame(){
    ctx.clearRect(0,0,canvas.clientWidth,canvas.clientHeight);
    for(const p of pieces){
      p.x += p.vx;
      p.y += p.vy;
      p.vy += 0.03; // gravity
      p.r += p.vr * 0.01;
      p.tilt += 0.08;
      ctx.save();
      ctx.translate(p.x, p.y);
      ctx.rotate(Math.sin(p.tilt)*0.4);
      ctx.fillStyle = p.color;
      ctx.fillRect(-p.w/2, -p.h/2, p.w, p.h);
      ctx.restore();
    }
    t++;
    if(t < 300) requestAnimationFrame(frame);
  }
  requestAnimationFrame(frame);
}

// kick it off
init();
</script>
</body>
</html>
